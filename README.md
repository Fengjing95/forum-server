## BBS

### ç¯å¢ƒè¦æ±‚
Node >= 12
mysql >= 5.7
redis 
é…ç½®æ–‡ä»¶åœ¨config.default.ts,åŸºæœ¬éƒ½æœ‰æ³¨é‡Š
### Guide
æœåŠ¡ç«¯midwayjs

webæ¡†æ¶â€”â€”eggï¼›
#### æ•°æ®åº“
mysqlï¼Œä½¿ç”¨typeORMæ˜ å°„ï¼Œå®ä½“å­˜æ”¾åœ¨src/entityç›®å½•ä¸‹ï¼Œæ•°æ®åº“é…ç½®å­˜æ”¾åœ¨config.default.tsä¸­çš„romä¸‹ï¼Œæ²¡æœ‰ä½¿ç”¨è¿æ¥æ± ï¼›
æ›´å¤štypeORMæ³¨è§£å¯è§[å®˜ç½‘](https://typeorm.biunav.com/zh)
redis,ä½¿ç”¨ioredisåº“è¿›è¡Œredisçš„è¯»å†™æ“ä½œ
é€šè¿‡æ’ä»¶[è‡ªåŠ¨ç”Ÿæˆ](https://www.yuque.com/midwayjs/midway_v2/typeorm_generator)å·²ç»å­˜åœ¨mysqlæ•°æ®åº“çš„å®ä½“ç±»

æ•°æ®åº“åˆæ­¥è®¾è®¡E-Rå›¾å¦‚ä¸‹æ‰€ç¤º
![e-r](https://gitee.com/liuhao1108/picGoCDN/raw/master//macimg/forum-E-R.png)
#### é‰´æƒ
ä½¿ç”¨egg-jwtè¿›è¡Œtokençš„ç­¾å‘ä¸éªŒè¯ï¼Œæœ‰æ•ˆæœŸè®¾ç½®ä¸º1å¤©(TODO: tokenç»­æœŸ)ï¼Œå¯†é’¥å­˜æ”¾åœ¨config.default.tsä¸­çš„jwtä¸‹ï¼Œ~~æš‚æ—¶ä¸æ¸…æ¥šmidwayæ€ä¹ˆè·å–configï¼Œæ‰€ä»¥æ‰‹åŠ¨å¯¼å…¥çš„å¯†é’¥ï¼›~~ctx.app.configå¯ä»¥è·å–é…ç½®,æˆ–è€…ä½¿ç”¨@Configæ³¨è§£è·å–é…ç½®,å¯ä»¥å‚è€ƒauth.ts
ç—›ç‚¹ï¼š
æ˜æ–‡å‘é€å¤ªä¸å®‰å…¨ï¼Œéœ€åŠ å¯†ä¼ è¾“ï¼›ä½¿ç”¨MD5è¿›è¡ŒåŠ å¯†ğŸ”ï¼Œè¢«ç¬¬ä¸‰è€…æ‹¦æˆªå¯†æ–‡ä¾æ—§å¯ä»¥ç›´æ¥ç™»é™†ç”šè‡³æ­ç§˜å‡ºåŸæ–‡ï¼Œæ‰€ä»¥åŠ å¯†çš„éœ€æ±‚åªæ˜¯å‡å°‘å¯¹ç”¨æˆ·å…¶ä»–ç½‘ç«™æ•°æ®çš„å¨èƒï¼Œå‰ç«¯åŠ å¯†çœŸçš„å¾ˆè›‹ç–¼ï¼Œæ²¡æœ‰å•¥å®Œç¾çš„æ–¹æ¡ˆï¼Œç›®å‰æ€è·¯ï¼š
> é‡‡ç”¨éå¯¹ç§°åŠ å¯†ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨å…¬é’¥ğŸ”‘å°†æ•°æ®åŠ å¯†ï¼ŒæœåŠ¡ç«¯ä½¿ç”¨ç§é’¥ğŸ”‘å°†æ•°æ®è§£å¯†ï¼Œè™½ç„¶ç¬¬ä¸‰è€…å¯èƒ½ä¼šæˆªå–å¯†æ–‡æ•°æ®åŒ…è¿›è¡Œç™»å½•ï¼Œä½†æ˜¯æ— æ³•è§£å¯†åŸå§‹æ•°æ®ï¼Œé…åˆå•è®¾å¤‡ç™»é™†ï¼Œå¯ä»¥åšåˆ°ç¬¬ä¸‰è€…ç™»é™†æ—¶ç”¨æˆ·æœ‰æ„ŸçŸ¥ï¼›rsaæ–¹é¢,ä½¿ç”¨node-rsaè¿›è¡ŒåŠ å¯†è§£å¯†ï¼Œå‰ç«¯ä½¿ç”¨browseræ¨¡å¼åŠ å¯†ï¼ŒæœåŠ¡ç«¯ä½¿ç”¨nodeæ¨¡å¼è§£å¯†;å•ä¸€è®¾å¤‡ç™»å½•æ–¹é¢å¯ä»¥é…åˆredis,ç™»å½•æ—¶ç”Ÿæˆéšæœºæ•°,å°†éšæœºæ•°æ··å…¥è½½è·ä¸­,redisä¹Ÿå­˜ä¸€ä»½,ç™»å½•æ—¶éªŒè¯éšæœºæ•°,å¦‚æœè€ƒè™‘å¤šç§ç»ˆç«¯å¯ä»¥å­˜å‚¨object,æ ¼å¼å¦‚
> ```JavaScript
> username: {
>   phone: '153432',
>   pc: '334522',
> }
> ```
åœ¨config.defaultä¸­é…ç½®å…¬é’¥å’Œå¯†é’¥ï¼Œåœ¨loginå’Œsignä¸­å¯¹passwordè¿›è¡Œrsaä¸­é—´ä»¶é¢„å¤„ç†ï¼Œç„¶åä¸æ•°æ®åº“æ•°æ®è¿›è¡Œæ¯”å¯¹

~~tokenä½œä¸ºkeyï¼Œipä½œä¸ºvalueå­˜ä¸ºredisï¼›æˆ–è€…å°†IPæ··å…¥è½½è·ä¸­.åºŸé™¤åŸå› :åˆ‡æ¢ç½‘ç»œä¼šå¯¼è‡´tokenå¤±æ•ˆ,åˆ‡æ¢WIFIå°±ä¼šå¤±æ•ˆ,æå¤§å½±å“ç”¨æˆ·ä½“éªŒ~~

TODOï¼šæ•°æ®åº“æ–¹é¢ä¸ºäº†å®‰å…¨æ€§å¯†ç ä¸ç›´æ¥å­˜å‚¨ï¼Œæ¥æ”¶åˆ°å¯†ç ä¹‹ååŠ ç›è¿›è¡ŒMD5åŠ å¯†ï¼Œå¯¹åŠ å¯†ç»“æœæ‘˜è¦è¿›è¡Œå­˜å‚¨ï¼Œç™»é™†éªŒè¯æ—¶åªæ¯”æ‘˜è¦ç»“æœå³å¯
#### å¼‚å¸¸æ•è·
è‡ªå®šä¹‰ä¸­é—´ä»¶æ•è·å¼‚å¸¸ï¼Œå·²æ·»åŠ å…¨å±€ä¸­é—´ä»¶ï¼Œè¿è¡ŒæŠ›å‡ºå¼‚å¸¸æ—¶ä¼šè‡ªåŠ¨æ•è·ï¼Œæš‚æœªå‘ç°æ— æ³•æ•è·çš„æƒ…å†µ
å…¨å±€ä¸­é—´ä»¶çš„æ·»åŠ åœ¨config.default.tsä¸­çš„middleæ•°ç»„ä¸‹

#### ç­‰çº§æœºåˆ¶
é¢„è®¾ç­‰çº§æœºåˆ¶å’Œç­¾åˆ°æœºåˆ¶ç»‘å®š,é€šè¿‡è¿ç»­ç­¾åˆ°å¤©æ•°æ¥è·å–ç»éªŒåŠ æˆä»¥åŠç»éªŒ,å‘å¸–è¢«ç‚¹èµå’Œå›å¸–éƒ½èƒ½è·å¾—ç›¸åº”çš„ç»éªŒ,
TODO: æœºåˆ¶æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­,é€šè¿‡é…ç½®æœºåˆ¶æ¥å¼•å…¥è§„åˆ™
è¿ç»­ç­¾åˆ°å¤©æ•°åŠåŠ æˆå¦‚ä¸‹
| å¤©æ•°(â‰¥) | åŠ æˆ(%) |
| ------- | ------- |
| 7       | 5       |
| 30      | 15      |
| 100     | 50      |
| 300     | 100     |

ç»éªŒèŒƒå›´åŠå¯¹åº”ç­‰çº§
| ç»éªŒèŒƒå›´   | ç­‰çº§ |
| ---------- | ---- |
| 0-10       | lv0  |
| 11-50      | lv1  |
| 51-200     | lv2  |
| 201-500    | lv3  |
| 501-3000   | lv4  |
| 3001-10000 | lv5  |
| >20000     | lv6  |

#### ç”¨æˆ·æ¨¡å—
ä¿®æ”¹æ˜µç§°,æ€§åˆ«...ç­‰åŸºæœ¬ä¿¡æ¯,å¤´åƒä¸Šä¼ é…åˆ[oss](https://www.yuque.com/midwayjs/midway_v2/oss_upload)ä¸Šä¼ äº‘ç«¯,è¿”å›å­˜å‚¨æ¡¶çš„åœ°å€

#### æ¶ˆæ¯é€šçŸ¥
ç‚¹èµ,å›å¸–,å…³æ³¨ä¸»è´´,å…³æ³¨äººåŠ¨æ€ç­‰æ¶ˆæ¯é€šè¿‡[socketIO](https://www.yuque.com/midwayjs/midway_v2/socketio)å®æ—¶å‘é€
é€šè¿‡è¿æ¥æ•°è·å–å®æ—¶åœ¨çº¿äººæ•°
ä½œä¸ºå‰¯æ¡†æ¶å¯åŠ¨,è§æ–‡æ¡£è¯´æ˜

#### å®šæ—¶ä»»åŠ¡
æ¯ä¸ªå°æ—¶[å®šæ—¶](https://www.yuque.com/midwayjs/midway_v2/eggjs#7c2fb7a222ce79c7fee22af85eff236c)è®¡ç®—å½“å‰çƒ­åº¦è¾ƒé«˜çš„å¸–å­,è¾ƒä¸ºæ´»è·ƒçš„ç”¨æˆ·ç­‰,å­˜å‚¨åˆ°redisä¸­
æˆ–è€…[ä»»åŠ¡è°ƒåº¦](https://www.yuque.com/midwayjs/midway_v2/task)

TODO [å‚æ•°æ ¡éªŒ](https://www.yuque.com/midwayjs/midway_v2/validate)
### å¯åŠ¨

```bash
$ npm i
$ npm run dev
$ open http://localhost:7001/
```

### éƒ¨ç½²

```bash
$ npm start
$ npm stop
```

